# A top-level list for all databases
databases:
  - name: matcha-database
    plan: free # Use the free tier

# A separate top-level list for all other services
services:
  # The Orchestrator Web Service
  - type: web
    name: matcha-orchestrator
    plan: free # Use the free tier
    runtime: docker # Tell Render to use Docker
    # Tell Render where the Dockerfile is
    dockerfilePath: ./orchestrator/Dockerfile
    
    # --- WE REMOVED startCommand and PYTHON_COMMAND ---
    # The start command now comes from the CMD in the Dockerfile
    
    # Set the environment variables
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: matcha-database
          property: connectionString
          
      # Set your secret keys (you can set these as "Secret Files" in Render's dashboard)
      - key: ORCHESTRATOR_API_KEY_PROVIDERS
        value: "your-secret-provider-key" 
      - key: ORCHESTRATOR_API_KEY_CONSUMERS
        value: "your-secret-consumer-key"
      - key: SECRET_KEY
        value: "a-very-secret-key"